<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Venom.com</title>
  <link rel="stylesheet" href="../../assets/css/3_home.css">
  <link rel="stylesheet" href="../../assets/css/7_follow.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="icon" href="../../assets/images/logo.png" type="image/x-icon">
</head>

<body>
  <!--Header-->

  <div class="profile_image">
    <p id="profile_image"></p>
  </div>
  <div class="follow_content" id="follow_content">

    <div id="follow_main" class="follow_main">
      <h2 id="flow_txt">Followers</h2>
    </div>

    <div id="follow_side" class="follow_side">
      <h2 id="flow_txt2">Following</h2>
    </div>
  </div>
  <div class="icons">
    <a href="#"><i class="fa fa-facebook" style="color: #000;"></i></a>
    <a href="#"><i class="fa fa-instagram" style="color: #000;"></i></a>
    <a href="#"><i class="fa fa-twitter" style="color: #000;"></i></a>
    <a href="#"><i class="fa fa-github" style="color: #000;"></i></a>
    <p>Â© 2023 Venom.com All rights reserved</p>
  </div>

  <script>

    for (let i = 0; i < 1; i++) {
      let div_follow = document.getElementById("follow_main");

      let div_box = document.createElement("div");
      div_box.setAttribute("class", "notific_profile");
      div_follow.append(div_box);

      let p_txt = document.createElement("p");
      p_txt.setAttribute("class", "user_name");
      p_txt.innerText = "Elon Musk";
      div_box.append(p_txt);

      let img_area = document.createElement("img");
      img_area.setAttribute("class", "user_name");
      img_area.setAttribute("src", "/assets/images/Profile/profile_1.jpg");
      img_area.setAttribute("alt", "profile_image");
      p_txt.prepend(img_area);

      let button_elem = document.createElement("button");
      button_elem.setAttribute("id", "follow-button");
      // button_elem.setAttribute("onclick", "followers()");
      button_elem.innerText = "Follow";
      div_box.append(button_elem);

    };

    for (let j = 0; j < 1; j++) {
      let div_follow2 = document.getElementById("follow_side");

      let div_box2 = document.createElement("div");
      div_box2.setAttribute("class", "notific_profile");
      div_follow2.append(div_box2);

      let p_txt2 = document.createElement("p");
      p_txt2.setAttribute("class", "user_name");
      p_txt2.innerText = "Elon Musk";
      div_box2.append(p_txt2);

      let img_area2 = document.createElement("img");
      img_area2.setAttribute("class", "user_name");
      img_area2.setAttribute("src", "/assets/images/Profile/profile_1.jpg");
      img_area2.setAttribute("alt", "profile_image");
      p_txt2.prepend(img_area2);

      let button_elem2 = document.createElement("button");
      button_elem2.setAttribute("id", "unfollow-button");
      // button_elem2.setAttribute("onclick", "following()");
      button_elem2.innerText = "Following";
      div_box2.append(button_elem2);
    };

    // get the user id from local storage
const userId = JSON.parse(localStorage.getItem('email_ID'));

let userDta = JSON.parse(localStorage.getItem("user_records"));
let profilePic = userDta.find((e) => e.user_email == userId)?.user_profile;
let profImage = document.getElementById("profile_image");
profImage.style.backgroundImage = "url(" + profilePic + ")";

// get the follow data from local storage or initialize it as an empty array
let followData = JSON.parse(localStorage.getItem('follow_data')) || [];

// check if the user is already following
const isFollowing = followData.some(data => data.userId === userId);

// update the button states based on whether the user is following or not
const followButton = document.getElementById('follow-button');
const unfollowButton = document.getElementById('unfollow-button');
if (isFollowing) {
  followButton.style.display = 'none';
  unfollowButton.style.display = 'block';
} else {
  followButton.style.display = 'block';
  unfollowButton.style.display = 'none';
}

// add event listeners to the follow and unfollow buttons
followButton.addEventListener('click', () => {
  // add the user id to the follow data array
  followData.push({ userId });

  // update the local storage
  localStorage.setItem('follow_data', JSON.stringify(followData));

  // update the button states
  followButton.style.display = 'none';
  unfollowButton.style.display = 'block';
});

unfollowButton.addEventListener('click', () => {
  // remove the user id from the follow data array
  followData = followData.filter(data => data.userId !== userId);

  // update the local storage
  localStorage.setItem('follow_data', JSON.stringify(followData));

  // update the button states
  followButton.style.display = 'block';
  unfollowButton.style.display = 'none';
});


    // function followers() {
    //   let followButton = document.getElementsByClassName("follow-btn");
    //   if (followButton.innerText === "Follow") {
    //     followButton.innerText = "Following";
    //   } else {
    //     followButton.innerText = "Follow";
    //   }
    // }

    // function following() {
    //   let followButton2 = document.getElementsByClassName("follow-btn2");
    //   if (followButton2.innerText === "Following") {
    //     followButton2.innerText = "Follow";
    //   } else {
    //     followButton2.innerText = "Following";
    //   }
    // }
// } 

  </script>
  <script src="/assets/header.js"></script>
</body>

</html>