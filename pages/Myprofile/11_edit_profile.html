<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings-Venom.com</title>
  <link rel="stylesheet" href="../../assets/css/3_home.css">
  <link rel="stylesheet" href="../../assets/css/9_edit_profile.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="icon" href="../../assets/images/logo.png" type="image/x-icon">
</head>

<body>
  <!--Header-->
  <header>
    <!--Nav-->
    <div class="header">
      <div class="nav_main">
        <p><a href="../home/3_home.html">Ve<span>nom</span></a></p>
      </div>

      <div class="navigation_link">
        <ul>
          <form>
            <input type="text" placeholder="Search...." /><span><i class="fa fa-search" style="color: #000;"></i></span>
          </form>
          </li>
          <li id="med-blk"><a href="../user_services/4_creat_post.html">Create</a></li>
          <a href="../user_services/5_notification.html">
            <li id="med-blk"><i class="fa fa-bell" style="color: #000;"></i></li>
          </a>
          <div class="dropdown">
            <button class="dropbtn">
              <li><img src="../../assets/images/profile_2.jpg" alt="profile_pic" width="40rem" height="40rem"></li>
            </button>
            <div class="dropdown-content">
              <a href="../Myprofile/6_profile.html"><i class="fa fa-user-circle-o"
                  style="font-size:15px"></i>Profile</a>
              <a id="med-dc" href="../user_services/4_creat_post.html"><i class="fa fa-magic"
                  style="font-size:18px"></i>Create</a>
              <a id="med-dc" href="../user_services/5_notification.html"><i class="fa fa-bell"
                  style="font-size:13px"></i>Notification</a>
              <a href="../Myprofile/11_edit_profile.html"><i class="fa fa-gear" style="font-size:15px"></i>Settings</a>
              <a href="../../index.html"><i class="fa fa-sign-out" style="font-size:18px"></i>Log-Out</a>
            </div>
          </div>
        </ul>
      </div>
    </div>
  </header>
  <div class="header__wrapper">
    <header id="imgBox"></header>
    <div class="round_1">
      <input type="file" accept="image/*" name="image" id="file" style="display: none" onchange="loadFile(event)">
      <label for="file"><i class="fa fa-camera" style="color: #000;"></i></label>
    </div>
    <div class="upload" id="imgBox2">
      <div class="round">
        <input type="file" accept="image/*" name="image" id="file2" style="display: none" onchange="loadFile2(event)">
        <label for="file2"><i class="fa fa-camera" style="color: #000;"></i></label>
      </div>
    </div>
    <h1>User</h1>
    <div class="inputs">
      <form onsubmit="saveUpdate(event);">
        <div>
          <p>Name</p>
          <input type="text" placeholder="Name" id="edit_name" />
        </div>
        <div>
          <p>Email</p>
          <input type="email" placeholder="Email" id="edit_email" />
        </div>
        <div>
          <p>DOB</p>
          <input type="date" required="true" style="text-transform: uppercase;" id="date" />
          <p>Country</p>
          <input type="text" placeholder="Country" list="count" id="country" />
          <datalist id="count">
            <option>Australia</option>
            <option>Bangladesh</option>
            <option>China</option>
            <option>Denmark</option>
            <option>Egypt</option>
            <option>France</option>
            <option>Germany</option>
            <option>Hungary</option>
            <option>India</option>
            <option>Japan</option>
            <option>Kuwait</option>
            <option>Lebanon</option>
            <option>Malaysia</option>
            <option>New Zealand</option>
            <option>Oman</option>
            <option>Pakistan</option>
            <option>Qatar</option>
            <option>Russia</option>
            <option>Singapore</option>
            <option>Thailand</option>
            <option>UAE</option>
            <option>UK</option>
            <option>USA</option>
            <option>Vietnam</option>
            <option>Yemen</option>
            <option>Zimbabwe</option>
          </datalist>
        </div>
        <div>
          <p>Designation</p>
          <input type="text" placeholder="Ex : CEO of Google" id="job">
          <p>Tags</p>
          <input type="text" placeholder="#tech #career #design #space" id="tag">
        </div>
        <div class="textarea_box">
          <h3>Bio</h3>
          <textarea placeholder="A short bio..." id="bio"></textarea>
          <p id="result"></p>
        </div>
        <button class="save_prfl" type="submit">Save Profile</button>
      </form>
    </div>
  </div>
  <div class="icons">
    <a href="#"><i class="fa fa-facebook" style="color: #000;"></i></a>
    <a href="#"><i class="fa fa-instagram" style="color: #000;"></i></a>
    <a href="#"><i class="fa fa-twitter" style="color: #000;"></i></a>
    <a href="#"><i class="fa fa-github" style="color: #000;"></i></a>
    <p>Â© 2022 Venom.com All rights reserved</p>
  </div>

  <script>
    var myText = document.getElementById("bio");
    var result = document.getElementById("result");
    var limit = 250;
    result.textContent = 0 + "/" + limit;

    myText.addEventListener("input", function () {
      var textLength = myText.value.length;
      result.textContent = textLength + "/" + limit;

      if (textLength > limit) {
        myText.style.borderColor = "#ff2851";
        result.style.color = "#ff2851";
        alert("Character limit only 250")
      }
      else {
        myText.style.borderColor = "#b2b2b2";
        result.style.color = "#737373";
      }
    });

    var imgBox = document.getElementById("imgBox");

    var loadFile = function (event) {
      var imageURL = URL.createObjectURL(event.target.files[0]);
      imgBox.style.backgroundImage = "url(" + imageURL + ")";
      localStorage.setItem("imageURL", imageURL);
    }


    var imgBox2 = document.getElementById("imgBox2");

    var loadFile2 = function (event) {
      var imageURL2 = URL.createObjectURL(event.target.files[0]);
      imgBox2.style.backgroundImage = "url(" + imageURL2 + ")";
      localStorage.setItem("imageURL2", imageURL2);
    }

    //  localStorage.getItem("key", value)
    let email_ID = JSON.parse(localStorage.getItem('email_ID'));
    let user_records = JSON.parse(localStorage.getItem("user_records"))

    function login_data(e) {
      return e.user_email == email_ID;
    }
    user_data = user_records.find(login_data);

    document.getElementById("edit_name").value = user_data['user_name'];
    document.getElementById("edit_email").value = user_data['user_email'];
    document.getElementById("date").value = user_data['user_date'];
    document.getElementById("country").innerText = user_data['user_country'];
    document.getElementById("job").value = user_data['user_job'];
    document.getElementById("tag").value = user_data['user_tag'];
    document.getElementById("bio").value = user_data['user_bio'];

    function saveUpdate(e) {
      e.preventDefault();
      let date = document.getElementById("date").value
      let country = document.getElementById("country").value
      let job = document.getElementById("job").value
      let tag = document.getElementById("tag").value
      let bio = document.getElementById("bio").value
      user_data["user_date"] = date;
      user_data["user_country"] = country;
      user_data["user_job"] = job;
      user_data["user_tag"] = tag;
      user_data["user_bio"] = bio;
      localStorage.setItem('user_records', JSON.stringify(user_records));
      alert("Updated successfully");
      window.location.href = "../Myprofile/6_profile.html"
      // console.log(user_list);
    }

  </script>
</body>

</html>